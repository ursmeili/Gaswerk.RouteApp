@using Gaswerk.RouteApp.Code
@using Gaswerk.RouteApp.Models
@using Route = Gaswerk.RouteApp.Models.Route
@model Tuple<Gaswerk.RouteApp.Models.Route, Gaswerk.RouteApp.Models.Bewertung>

@{
    var kunde = this.CurrentKunde();
    var route = Model.Item1;
    var bewertung = Model.Item2 ?? new Bewertung { Kunde = kunde, Schwierigkeit = route.RoutenBauerBewertung?.Schwierigkeit };
}
@{
    ViewBag.Title = "Route Bewerten";
    Layout = "~/Views/_Layout.cshtml";
}
<div class="container">
    @Html.Partial("BewertungList", Model.Item1)
    @if (!route.BereitsBewertet(kunde))
    {
        <h5 class="text-danger">Deine Bewertung</h5>
        using (Html.BeginForm(new { id = route.Id }))
        {
            @Html.MyValidationSummary()
            @Html.Partial("SingleBewertung", Tuple.Create(bewertung, false,true,route.Id))
        }
    }
</div>